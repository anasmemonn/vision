<!DOCTYPE html>
<html lang="en">
<head>
  <link rel="icon" href="isagi.jpg" type="image/jpg">
  <meta charset="UTF-8">
  <title>FINAL TIMETABLE</title>
  <style>
    /* Import a modern monospaced font */
    @import url('https://fonts.googleapis.com/css2?family=Fira+Code:wght@400;700&display=swap');
    :root {
      /* === Futuristic Color Palette === */
      --dark-bg: #000000; /* Deep space black */
      --neon-purple: #00c7ea; /* More vibrant purple */
      --neon-magenta: #FF00FF; /* Replaced pink with neon magenta */
      --neon-blue: #dae40da9; /* Cyan blue */
      --accent: #00ffcc; /* Bright teal */
      --hologram-green: #39ff14; /* More intense matrix green */
      --cyber-yellow: #ffd700; /* Futuristic gold */
      --glow: 0 0 20px rgba(229, 253, 10, 0.8); /* Base glow effect with transparency */
    
      /* === Advanced Effects === */
      --hologram-gradient: linear-gradient(
        135deg,
        var(--neon-purple) 0%,
        var(--neon-magenta) 25%, /* Updated to neon magenta */
        var(--neon-blue) 50%,
        var(--accent) 75%,
        var(--hologram-green) 100%
      );
      --hologram-texture: repeating-linear-gradient(
        45deg,
        transparent,
        transparent 10px,
        rgba(255, 255, 255, 0.1) 10px,
        rgba(255, 255, 255, 0.1) 20px
      );
      --neon-glow: 0 0 10px var(--neon-purple), 0 0 20px var(--neon-magenta), /* Updated to neon magenta */
        0 0 30px var(--neon-blue), 0 0 40px var(--accent);
      --pulse-animation: pulse 2s infinite ease-in-out;
      --scanline-animation: scanline 5s linear infinite;
      --flicker-animation: flicker 3s infinite;
    
      /* === Typography & Sizing === */
      --font-primary: "Fira Code", monospace;
      --font-secondary: "Orbitron", sans-serif; /* Futuristic font */
      --transition-speed: 0.3s;
      --border-radius: 12px; /* Rounded futuristic edges */
      --panel-bg: rgba(0, 0, 0, 0.9); /* Semi-transparent black */
      --glass-effect: rgba(255, 255, 255, 0.1); /* Glassmorphism effect */
      --glass-border: 1px solid rgba(255, 255, 255, 0.2); /* Glass border */
      --blur-effect: blur(10px); /* Blur for glass effect */
    
      /* === Additional Effects === */
      --text-glow: 0 0 5px var(--neon-blue), 0 0 10px var(--neon-blue), 0 0 20px var(--neon-blue), 0 0 40px var(--accent);
      --button-glow: 0 0 10px var(--neon-magenta), 0 0 20px var(--neon-magenta), 0 0 40px var(--neon-magenta), 0 0 60px var(--neon-purple); /* Updated to neon magenta */
      --hover-glow: 0 0 15px var(--neon-purple), 0 0 30px var(--neon-purple), 0 0 60px var(--neon-purple), 0 0 90px var(--neon-blue);
      --neon-border: 2px solid var(--neon-purple);
      --neon-shadow: 0 0 20px var(--neon-purple), 0 0 40px var(--neon-magenta), 0 0 60px var(--neon-blue); /* Updated to neon magenta */
    }
    
    /* === Keyframes for Animations === */
    @keyframes pulse {
      0% {
        transform: scale(1);
        opacity: 1;
        box-shadow: 0 0 10px var(--neon-purple);
      }
      50% {
        transform: scale(1.05);
        opacity: 0.7;
        box-shadow: 0 0 20px var(--neon-pink);
      }
      100% {
        transform: scale(1);
        opacity: 1;
        box-shadow: 0 0 10px var(--neon-blue);
      }
    }
    
    @keyframes scanline {
      0% {
        background-position: 0 0;
        opacity: 0.8;
      }
      50% {
        opacity: 0.5;
      }
      100% {
        background-position: 100% 100%;
        opacity: 0.8;
      }
    }
    
    @keyframes flicker {
      0%, 19%, 21%, 23%, 25%, 54%, 56%, 100% {
        opacity: 1;
      }
      20%, 24%, 55% {
        opacity: 0.5;
      }
    }
    
    /* === Example Usage === */
    .panel {
      background: var(--hologram-gradient), var(--hologram-texture);
      border: var(--neon-border);
      box-shadow: var(--neon-glow), var(--neon-shadow);
      border-radius: var(--border-radius);
      backdrop-filter: var(--blur-effect);
      animation: var(--pulse-animation);
    }
    
    .button {
      background: var(--neon-pink);
      border: var(--neon-border);
      box-shadow: var(--button-glow);
      color: var(--dark-bg);
      font-family: var(--font-secondary);
      font-size: 1.2rem;
      padding: 10px 20px;
      border-radius: var(--border-radius);
      transition: box-shadow var(--transition-speed);
    }
    
    .button:hover {
      box-shadow: var(--hover-glow);
      animation: var(--flicker-animation);
    }
    
    .text-glow {
      text-shadow: var(--text-glow);
      font-family: var(--font-primary);
    }
    
    .glass-panel {
      background: var(--glass-effect);
      border: var(--glass-border);
      backdrop-filter: var(--blur-effect);
      border-radius: var(--border-radius);
      padding: 20px;
    }

/* === Example Usage === */
body {
  background-color: var(--dark-bg);
  color: var(--neon-blue);
  font-family: var(--font-primary);
  margin: 0;
  padding: 0;
}

h1, h2, h3 {
  font-family: var(--font-secondary);
  text-shadow: var(--text-glow);
}

button {
  background: var(--hologram-gradient);
  border: none;
  border-radius: var(--border-radius);
  color: var(--dark-bg);
  padding: 10px 20px;
  font-family: var(--font-secondary);
  font-size: 1rem;
  cursor: pointer;
  transition: var(--transition-speed);
  box-shadow: var(--button-glow);
}

button:hover {
  box-shadow: var(--hover-glow);
  transform: scale(1.05);
}

.panel {
  background: var(--panel-bg);
  backdrop-filter: var(--blur-effect);
  border-radius: var(--border-radius);
  padding: 20px;
  margin: 20px;
  box-shadow: var(--neon-glow);
}

.glass-effect {
  background: var(--glass-effect);
  backdrop-filter: var(--blur-effect);
  border-radius: var(--border-radius);
  padding: 20px;
  margin: 20px;
  box-shadow: var(--neon-glow);
}
    /* === Keyframes for Animations === */
    @keyframes pulse {
      0% {
        box-shadow: var(--neon-glow);
      }
      50% {
        box-shadow: 0 0 30px var(--neon-purple), 0 0 50px var(--neon-pink),
          0 0 70px var(--neon-blue), 0 0 90px var(--accent);
      }
      100% {
        box-shadow: var(--neon-glow);
      }
    }
    
    @keyframes scanline {
      0% {
        background-position: 0 0;
      }
      100% {
        background-position: 0 100%;
      }
    }
    
    * { box-sizing: border-box; }

    body {
      margin: 0;
      background: var(--dark-bg);
      min-height: 100vh;
      font-family: var(--font-primary);
      color: #fff;
      overflow-x: hidden;
      line-height: 1.6;
      position: relative;
    }

    /* Particle background container */
    #particles-js {
      position: fixed;
      width: 100%;
      height: 100%;
      z-index: 0;
    }

    /* Animated radial background */
    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 200%;
      height: 200%;
      background: radial-gradient(circle at center, rgba(255,255,255,0.05), transparent 70%);
      z-index: -1;
      animation: bgShift 10s ease infinite;
    }
    @keyframes bgShift {
      0% { transform: translate(-25%, -25%) scale(1); }
      50% { transform: translate(-20%, -20%) scale(1.1); }
      100% { transform: translate(-25%, -25%) scale(1); }
    }

    .container {
      max-height: 1000px; /* ‡§ú‡§ø‡§§‡§®‡§æ ‡§ï‡§Ç‡§ü‡•á‡§Ç‡§ü ‡§¶‡§ø‡§ñ‡§æ‡§®‡§æ ‡§π‡•ã ‡§â‡§§‡§®‡§æ ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç */
      overflow-y: auto; /* ‡§∏‡§ø‡§∞‡•ç‡§´ Y-‡§∏‡•ç‡§ï‡•ç‡§∞‡•â‡§≤ ‡§ï‡•ã ‡§è‡§ï‡•ç‡§ü‡§ø‡§µ‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç */
      scrollbar-width: thin; /* ‡§´‡§æ‡§Ø‡§∞‡§´‡•â‡§ï‡•ç‡§∏ ‡§ï‡•á ‡§≤‡§ø‡§è */
      scrollbar-color: var(--neon-purple) var(--dark-bg); /* ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•â‡§≤‡§¨‡§æ‡§∞ */
      
      width: 100%; /* ‡§ï‡§Ç‡§ü‡•á‡§®‡§∞ ‡§ï‡•Ä ‡§ö‡•å‡§°‡§º‡§æ‡§à ‡§ï‡§Æ ‡§ï‡§∞‡•á‡§Ç */
      max-width: 1500px; /* ‡§Æ‡•à‡§ï‡•ç‡§∏‡§ø‡§Æ‡§Æ ‡§ö‡•å‡§°‡§º‡§æ‡§à ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç */
      margin: auto; /* ‡§∏‡•á‡§Ç‡§ü‡§∞ ‡§Æ‡•á‡§Ç ‡§≤‡§æ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è */
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    /* ‡§ï‡§∏‡•ç‡§ü‡§Æ ‡§∏‡•ç‡§ï‡•ç‡§∞‡•â‡§≤‡§¨‡§æ‡§∞ ‡§∏‡•ç‡§ü‡§æ‡§á‡§≤ (‡§ï‡•ç‡§∞‡•ã‡§Æ, ‡§è‡§ú, ‡§∏‡§´‡§æ‡§∞‡•Ä ‡§ï‡•á ‡§≤‡§ø‡§è) */
    .container::-webkit-scrollbar {
      width: 10px;
    }
    
    .container::-webkit-scrollbar-thumb {
      background: var(--neon-purple);
      border-radius: 10px;
    }
    

    .panel {
      background: var(--panel-bg);
      border: 1px solid var(--neon-purple);
      border-radius: 10px;
      padding: 2rem;
      margin: 2rem 0;
      box-shadow: var(--glow);
      animation: panelFadeIn 0.8s ease-out;
    }
    @keyframes panelFadeIn {
      from { opacity: 0; transform: scale(0.95); }
      to { opacity: 1; transform: scale(1); }
    }

    h1 {
      text-align: center;
      margin-bottom: 1rem;
      font-size: 2.5rem;
      text-shadow: 0 0 10px var(--neon-pink);
      animation: textGlow 1.5s ease-in-out infinite alternate;
    }
    @keyframes textGlow {
      from { text-shadow: 0 0 5px var(--neon-pink); }
      to { text-shadow: 0 0 20px var(--neon-pink); }
    }

    h2 {
      border-bottom: 1px solid var(--neon-purple);
      padding-bottom: 0.5rem;
      margin-bottom: 1rem;
      font-size: 1.8rem;
      position: relative;
    }
    h2::after {
      content: "";
      position: absolute;
      width: 50px;
      height: 3px;
      background: var(--neon-blue);
      left: 0;
      bottom: -5px;
      animation: slideIn 1s ease-out;
    }
    @keyframes slideIn {
      from { transform: translateX(-100%); }
      to { transform: translateX(0); }
    }

    .cyber-line {
      height: 2px;
      background: linear-gradient(90deg, transparent, var(--neon-purple), transparent);
      margin: 2rem 0;
    }

    .input-group {
      display: grid;
      grid-template-columns: 1fr auto auto auto;
      gap: 1rem;
      margin-bottom: 2rem;
    }
    input, textarea, select {
      background: rgba(255,255,255,0.1);
      border: 1px solid var(--neon-purple);
      color: white;
      padding: 12px;
      border-radius: var(--border-radius);
      transition: all var(--transition-speed) ease;
      font-size: 1rem;
    }
    input:focus, textarea:focus, select:focus {
      border-color: var(--neon-pink);
      box-shadow: var(--glow);
      outline: none;
    }
    button {
      background: linear-gradient(45deg, var(--neon-purple), var(--neon-pink));
      border: none;
      padding: 12px 24px;
      color: white;
      border-radius: var(--border-radius);
      cursor: pointer;
      transition: transform 0.3s ease, box-shadow 0.3s ease;
      text-transform: uppercase;
      font-weight: bold;
      letter-spacing: 1px;
      font-size: 1rem;
      box-shadow: var(--glow);
    }
    button:hover {
      transform: scale(1.05);
      box-shadow: 0 0 25px var(--neon-blue);
    }

    .empty {
      text-align: center;
      color: rgba(255,255,255,0.6);
      font-style: italic;
      padding: 1rem;
    }

    .task-list, .note-history {
      display: grid;
      gap: 1rem;
    }

    .task-item, .note-item {
      background: rgba(255,255,255,0.05);
      padding: 1.5rem;
      border-radius: 8px;
      border-left: 4px solid var(--neon-purple);
      display: flex;
      justify-content: space-between;
      align-items: center;
      animation: taskAppear 0.5s ease;
      position: relative;
      overflow: hidden;
    }
    @keyframes taskAppear {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    /* Shine effect on task items */
    .task-item::before {
      content: "";
      position: absolute;
      top: 0;
      left: -100%;
      width: 100%;
      height: 100%;
      background: linear-gradient(120deg, transparent, rgba(255,255,255,0.2), transparent);
      transform: skewX(-25deg);
    }
    .task-item:hover::before {
      animation: shine 0.75s forwards;
    }
    @keyframes shine {
      from { left: -100%; }
      to { left: 100%; }
    }

    .priority-tag {
      padding: 4px 8px;
      border-radius: 4px;
      font-size: 0.8em;
      margin-bottom: 0.5rem;
      display: inline-block;
    }
    .low { background: rgba(0, 177, 92, 0.95); }
    .medium { background: rgba(190, 29, 0, 0.2); }
    .high { background: rgba(255,23,68,0.2); }

    .deadline {
      color: var(--accent);
      font-size: 0.9em;
      margin-top: 0.5rem;
    }

    .progress-bar {
      width: 100%;
      height: 10px;
      background: rgba(255,255,255,0.1);
      border-radius: var(--border-radius);
      overflow: hidden;
      margin-top: 0.5rem;
    }
    .progress {
      height: 100%;
      background: linear-gradient(90deg, var(--neon-purple), var(--neon-pink));
      width: 0;
      transition: width 0.5s ease;
    }

    .task-item button,
    .note-item button {
      background: rgba(255,23,68,0.2);
      border: 1px solid var(--neon-pink);
      padding: 8px 16px;
      border-radius: var(--border-radius);
      transition: all var(--transition-speed) ease;
      margin-left: 0.5rem;
    }
    .task-item button:hover,
    .note-item button:hover {
      background: rgba(255,23,68,0.5);
      box-shadow: var(--glow);
    }

    .reward-system {
      margin-top: 2rem;
      text-align: center;
      animation: fadeIn 1s ease;
    }
    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }
    .reward-system h2 {
      color: var(--neon-pink);
      text-shadow: var(--glow);
      margin-bottom: 1rem;
    }
    .reward-points {
      font-size: 1.5rem;
      color: var(--accent);
    }
    /* Daily points display */
    #dailyPoints {
      font-size: 1.2rem;
      color: var(--neon-blue);
      margin-top: 0.5rem;
    }
    
    /* Center the toggle buttons */
    #toggleHistoryBtn, #toggleNotesBtn {
      display: block;
      margin: 1rem auto;
    }
    
    /* Settings Icon */
    #settingsIcon {
      position: fixed;
      top: 800px;
      right: 10px;
      font-size: 2rem;
      cursor: pointer;
      z-index: 1001;
      grid-auto-flow: 1px;
    }
    
    /* Settings container */
    #settingsContainer {
      display: none;
      position: fixed;
      top: 90px;
      right: -10px;
      background: var(--panel-bg);
      border: 1px solid var(--neon-purple);
      padding: 1rem;
      border-radius: 8px;
      z-index: 1000;
    }
    #settingsContainer label {
      display: block;
      margin-bottom: 0.5rem;
    }
    #settingsContainer button {
      margin-top: 0.5rem;
    }
    
    /* Accordion effect for task history */
    .task-history {
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.4s ease;
    }
    .task-history.open {
      max-height: 1000px;
    }
    
    /* Aborted task styling */
    .task-item.aborted {
      border-left-color: #ff0000;
      opacity: 0.85;
    }
    
    /* Hover glow */
    .task-item:hover, .note-item:hover {
      box-shadow: 0 0 30px var(--neon-blue);
    }
    
    @keyframes pulsate {
      0% { transform: scale(1); }
      50% { transform: scale(1.03); }
      100% { transform: scale(1); }
    }
    .pulsate {
      animation: pulsate 1.5s infinite;
    }
    
    /* Custom Scrollbar Styling */
    ::-webkit-scrollbar { width: 8px; }
    ::-webkit-scrollbar-track { background: rgba(255,255,255,0.1); }
    ::-webkit-scrollbar-thumb {
      background: var(--neon-purple);
      border-radius: 4px;
    }
    ::-webkit-scrollbar-thumb:hover { background: var(--neon-pink); }
    
    /* Responsive adjustments for mobile devices */
    @media (max-width: 600px) {
      .container { padding: 1rem; }
      h1 { font-size: 2rem; }
      h2 { font-size: 1.5rem; }
      .input-group { grid-template-columns: 1fr auto; }
      button { padding: 10px 20px; font-size: 0.9rem; }
      .task-item, .note-item { flex-direction: column; align-items: flex-start; }
      .task-item > div:last-child, .note-item > button { margin-top: 0.5rem; }
    }
  </style>
  
  
  <!-- Particles.js Library -->
  <script src="https://cdn.jsdelivr.net/particles.js/2.0.0/particles.min.js"></script>
  <!-- Canvas-confetti Library for celebrations -->
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.5.1/dist/confetti.browser.min.js"></script>
</head>
<body>
  <!-- Settings Icon -->
  <div id="settingsIcon">‚öôÔ∏è</div>
  <!-- Settings Panel -->
  <div id="settingsContainer">
    <label>
      <input type="checkbox" id="voiceToggle" checked>
      Enable Voice Notifications
    </label>
    <button id="clearHistoryBtn">Clear Task History</button>
    <button id="resetDailyBtn">Reset Daily Points</button>
  </div>
  
  <div id="particles-js"></div>
  <div class="container">
    <div class="panel">
      <h1>MADE BY NOTURTYPE_ANASS</h1>
      <div class="cyber-line"></div>
      
      <!-- Active Missions Section -->
      <div class="task-manager">
        <h2>Active Missions</h2>
        <div class="input-group">
          <input type="text" id="taskInput" placeholder="Enter your mission...">
          <select id="priority">
            <option value="low">Low</option>
            <option value="medium">Medium</option>
            <option value="high">High</option>
          </select>
          <input type="number" id="taskTime" placeholder="Time (in minutes)" min="1">
          <button id="addTaskBtn">Add Mission</button>
        </div>
        <div class="task-list" id="taskList">
          <!-- Active tasks rendered here -->
        </div>
      </div>
      
      <div class="cyber-line"></div>
      
      <!-- Task History Section -->
      <button id="toggleHistoryBtn">Show Task History</button>
      <div class="task-history" id="taskHistoryWrapper">
        <h2>Task History</h2>
        <div class="task-list" id="taskHistory">
          <!-- Completed/aborted tasks rendered here -->
        </div>
      </div>
      
      <div class="cyber-line"></div>
      
      <!-- Notes Section (hidden by default) -->
      <button id="toggleNotesBtn">Show Notes</button>
      <div id="notesContainer" style="display: none;">
        <div class="note-system">
          <h2>Encrypted Notes</h2>
          <div class="input-group" style="grid-template-columns: 1fr auto;">
            <textarea id="noteInput" placeholder="Enter your note..."></textarea>
            <button id="addNoteBtn">Add Note</button>
          </div>
          <div class="note-history" id="noteHistory">
            <!-- Notes rendered here with Show/Hide toggle -->
          </div>
        </div>
      </div>
      
      <div class="cyber-line"></div>
      
      <!-- Reward System Section -->
      <div class="reward-system">
        <h2>Reward Points</h2>

        <div id="dailyPoints">Daily Points: 0/100</div>
      </div>
    </div>
  </div>
  <script>
    class DarkProductivityApp {
      constructor() {
        // ‡§ë‡§°‡§ø‡§Ø‡•ã ‡§´‡§æ‡§á‡§≤‡•ã‡§Ç ‡§ï‡•ã ‡§™‡•ç‡§∞‡•Ä-‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç
        this.sounds = {
          fifty: new Audio('50.mp3'),
          seventy: new Audio('70.mp3'),
          ninety: new Audio('90.mp3'),
          beep: new Audio('beep.mp3'),
          timer: new Audio('timer.mp3')
        };
  
        this.state = {
          tasks: JSON.parse(localStorage.getItem('tasks')) || [],
          notes: JSON.parse(localStorage.getItem('notes')) || [],
          rewardPoints: parseInt(localStorage.getItem('rewardPoints')) || 0,
          dailyPoints: parseInt(localStorage.getItem('dailyPoints')) || 0,
          dailyDate: localStorage.getItem('dailyDate') || new Date().toLocaleDateString(),
          dailyGoalAchieved: false
        };
  
        // ‡§Ø‡§¶‡§ø localStorage ‡§Æ‡•á‡§Ç voiceEnabled ‡§ï‡•Ä ‡§ï‡•ã‡§à value ‡§® ‡§π‡•ã ‡§§‡•ã ‡§°‡§ø‡§´‡§º‡•â‡§≤‡•ç‡§ü true ‡§∞‡§ñ‡•á‡§Ç
        this.config = {
          voiceEnabled: (localStorage.getItem('voiceEnabled') === null)
            ? true
            : JSON.parse(localStorage.getItem('voiceEnabled'))
        };
  
        // ‡§¶‡§ø‡§® ‡§¨‡§¶‡§≤‡§®‡•á ‡§™‡§∞ daily points ‡§∞‡•Ä‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
        const today = new Date().toLocaleDateString();
        if (this.state.dailyDate !== today) {
          this.state.dailyPoints = 0;
          this.state.dailyDate = today;
          this.state.dailyGoalAchieved = false;
          this.saveState();
        }
  
        this.cacheDOM();
        this.bindEvents();
        this.updateUI();
        this.updateRewardPointsDisplay();
        this.startProgressUpdateLoop(); // ‡§Ö‡§™‡§°‡•á‡§ü‡•á‡§° ‡§≤‡•Ç‡§™ (setInterval ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó)
        this.startBeepReminder();
        this.initBackgroundAudio();
        this.requestNotificationPermission();
        this.setupVisibilityChange();
      }
  
      cacheDOM() {
        this.taskInput = document.getElementById('taskInput');
        this.priority = document.getElementById('priority');
        this.taskTime = document.getElementById('taskTime');
        this.taskList = document.getElementById('taskList');
        this.taskHistory = document.getElementById('taskHistory');
        this.taskHistoryWrapper = document.getElementById('taskHistoryWrapper');
        this.noteInput = document.getElementById('noteInput');
        this.noteHistory = document.getElementById('noteHistory');
        this.addTaskBtn = document.getElementById('addTaskBtn');
        this.addNoteBtn = document.getElementById('addNoteBtn');
        this.toggleHistoryBtn = document.getElementById('toggleHistoryBtn');
        this.toggleNotesBtn = document.getElementById('toggleNotesBtn');
        this.settingsIcon = document.getElementById('settingsIcon');
        this.settingsContainer = document.getElementById('settingsContainer');
        this.clearHistoryBtn = document.getElementById('clearHistoryBtn');
        this.resetDailyBtn = document.getElementById('resetDailyBtn');
        this.voiceToggle = document.getElementById('voiceToggle');
        this.dailyPointsDisplay = document.getElementById('dailyPoints');
      }
  
      bindEvents() {
        this.addTaskBtn.addEventListener('click', () => this.handleAddTask());
        this.addNoteBtn.addEventListener('click', () => this.handleAddNote());
        this.toggleHistoryBtn.addEventListener('click', () => this.toggleHistory());
        this.toggleNotesBtn.addEventListener('click', () => this.toggleNotes());
        this.settingsIcon.addEventListener('click', () => this.toggleSettings());
        this.clearHistoryBtn.addEventListener('click', () => this.clearHistory());
        this.resetDailyBtn.addEventListener('click', () => this.resetDailyPoints());
        this.voiceToggle.addEventListener('change', () => {
          this.config.voiceEnabled = this.voiceToggle.checked;
          localStorage.setItem('voiceEnabled', JSON.stringify(this.config.voiceEnabled));
        });
  
        // Active tasks ‡§™‡§∞ ‡§¨‡§ü‡§® ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡•á ‡§≤‡§ø‡§è ‡§°‡•á‡§≤‡•Ä‡§ó‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
        this.taskList.addEventListener('click', (e) => {
          if (e.target.classList.contains('complete-task')) {
            const id = Number(e.target.dataset.id);
            this.playSound('timer');
            this.completeTask(id, true);
          } else if (e.target.classList.contains('abort-task')) {
            const id = Number(e.target.dataset.id);
            this.abortTask(id);
          } else if (e.target.classList.contains('edit-task')) {
            const id = Number(e.target.dataset.id);
            this.editTask(id);
          } else if (e.target.classList.contains('save-task')) {
            const id = Number(e.target.dataset.id);
            this.saveEditedTask(id);
          }
        });
  
        // Task history ‡§∏‡•á ‡§°‡§ø‡§≤‡•Ä‡§ü ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§°‡•á‡§≤‡•Ä‡§ó‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
        this.taskHistory.addEventListener('click', (e) => {
          if (e.target.classList.contains('delete-task')) {
            const id = Number(e.target.dataset.id);
            this.deleteTask(id);
          }
        });
  
        // Notes ‡§ï‡•á ‡§≤‡§ø‡§è toggle event
        this.noteHistory.addEventListener('click', (e) => {
          if (e.target.classList.contains('toggle-note')) {
            const id = Number(e.target.dataset.id);
            this.toggleNoteDecryption(id);
          }
        });
  
        // Note input ‡§ï‡•á ‡§Ö‡§≤‡§æ‡§µ‡§æ Enter key ‡§™‡§∞ ‡§ü‡§æ‡§∏‡•ç‡§ï ‡§ú‡•ã‡§°‡§º‡•á‡§Ç
        document.addEventListener('keypress', (e) => {
          if (e.key === 'Enter' && document.activeElement !== this.noteInput) {
            e.preventDefault();
            this.handleAddTask();
          }
        });
      }
  
      saveState() {
        localStorage.setItem('tasks', JSON.stringify(this.state.tasks));
        localStorage.setItem('notes', JSON.stringify(this.state.notes));
        localStorage.setItem('rewardPoints', this.state.rewardPoints);
        localStorage.setItem('dailyPoints', this.state.dailyPoints);
        localStorage.setItem('dailyDate', this.state.dailyDate);
      }
  
      handleAddTask() {
        const text = this.taskInput.value.trim();
        const time = parseInt(this.taskTime.value);
        if (!text || isNaN(time) || time <= 0) return;
        const newTask = {
          id: Date.now(),
          text,
          priority: this.priority.value,
          time,
          completed: false,
          aborted: false,
          progress: 0,
          startTime: Date.now(),
          endTime: Date.now() + time * 60000,
          rewarded: false,
          prompted: false,
          beep50: false,
          beep70: false,
          beep90: false
        };
        this.state.tasks.push(newTask);
        this.taskInput.value = '';
        this.taskTime.value = '';
        this.updateUI();
        this.saveState();
        this.playSound('timer');
        this.showAchievement('Timer started! Good luck!');
      }
  
      completeTask(id, manual = false) {
        const task = this.state.tasks.find(t => t.id === id);
        if (task && !task.completed && !task.aborted) {
          task.completed = true;
          task.progress = 100;
          task.actualCompletionTime = Date.now();
          if (!task.rewarded) {
            this.state.rewardPoints += 20;
            this.state.dailyPoints += 20;
            task.rewarded = true;
          }
          this.updateUI();
          this.updateRewardPointsDisplay();
          this.saveState();
          this.playSound('timer');
          this.showCelebration('Mission Accomplished!');
        }
      }
  
      abortTask(id) {
        const task = this.state.tasks.find(t => t.id === id);
        if (task && !task.completed && !task.aborted) {
          task.aborted = true;
          task.abortTime = Date.now();
          if (!task.rewarded) {
            this.state.rewardPoints -= 20;
            this.state.dailyPoints -= 20;
            task.rewarded = true;
          }
          this.updateUI();
          this.updateRewardPointsDisplay();
          this.saveState();
        }
      }
  
      deleteTask(id) {
        this.state.tasks = this.state.tasks.filter(t => t.id !== id);
        this.updateUI();
        this.saveState();
      }
  
      handleAddNote() {
        const text = this.noteInput.value.trim();
        if (!text) return;
        const encryptedText = btoa(text);
        const newNote = {
          id: Date.now(),
          text: encryptedText,
          timestamp: new Date().toLocaleString(),
          showDecrypted: false 
        };
        this.state.notes.unshift(newNote);
        this.noteInput.value = '';
        this.updateUI();
        this.saveState();
      }
  
      deleteNote(id) {
        this.state.notes = this.state.notes.filter(note => note.id !== id);
        this.updateUI();
        this.saveState();
      }
  
      toggleNoteDecryption(id) {
        const note = this.state.notes.find(note => note.id === id);
        if (note) {
          note.showDecrypted = !note.showDecrypted;
          this.updateUI();
          this.saveState();
        }
      }
  
      updateRewardPointsDisplay() {
        this.dailyPointsDisplay.textContent = `Daily Points: ${this.state.dailyPoints}/100`;
        if (this.state.dailyPoints >= 100 && !this.state.dailyGoalAchieved) {
          this.showAchievement('Daily Goal Achieved!');
          this.state.dailyGoalAchieved = true;
        }
      }
  
      // ‡§Ø‡§¶‡§ø ‡§¨‡§ö‡§æ ‡§π‡•Å‡§Ü ‡§∏‡§Æ‡§Ø 1 ‡§Æ‡§ø‡§®‡§ü ‡§∏‡•á ‡§ï‡§Æ ‡§π‡•à ‡§§‡•ã "X seconds left" ‡§î‡§∞ ‡§Ö‡§®‡•ç‡§Ø‡§•‡§æ "X minutes Y seconds left" ‡§¨‡•ã‡§≤‡•á
      getRemainingTimeText(task) {
        const now = Date.now();
        const remaining = Math.max(task.endTime - now, 0);
        const minutes = Math.floor(remaining / 60000);
        const seconds = Math.floor((remaining % 60000) / 1000);
        return minutes === 0 ? `${seconds} seconds left` : `${minutes} minutes ${seconds} seconds left`;
      }
  
      renderActiveTasks() {
        const activeTasks = this.state.tasks.filter(task => !task.completed && !task.aborted);
        if (activeTasks.length === 0) {
          this.taskList.innerHTML = `<p class="empty">No active missions. Add one!</p>`;
          return;
        }
        this.taskList.innerHTML = activeTasks.map(task => `
          <div class="task-item" data-id="${task.id}">
            <div>
              <div class="priority-tag ${task.priority}">${task.priority.toUpperCase()}</div>
              <span class="task-text" id="taskText-${task.id}">${task.text}</span>
              <input type="text" class="edit-input" id="editInput-${task.id}" style="display:none;" value="${task.text}">
              <div class="deadline" id="deadline-${task.id}">
                ${this.getRemainingTimeText(task)}
              </div>
              <div class="progress-bar">
                <div class="progress" id="progress-${task.id}" style="width: ${task.progress}%"></div>
              </div>
            </div>
            <div>
              <button class="complete-task" data-id="${task.id}">‚úì</button>
              <button class="abort-task" data-id="${task.id}">‚úï</button>
              <button class="edit-task" data-id="${task.id}">Edit</button>
              <button class="save-task" data-id="${task.id}" style="display:none;">Save</button>
            </div>
          </div>
        `).join('');
      }
  
      renderTaskHistory() {
        const historyTasks = this.state.tasks.filter(task => task.completed || task.aborted);
        if (historyTasks.length === 0) {
          this.taskHistory.innerHTML = `<p class="empty">No completed or aborted missions yet.</p>`;
          return;
        }
        this.taskHistory.innerHTML = historyTasks.map(task => {
          let timingInfo = '';
          if (task.completed && task.actualCompletionTime) {
            const diff = task.actualCompletionTime - task.startTime;
            const minutes = Math.floor(diff / 60000);
            const seconds = Math.floor((diff % 60000) / 1000);
            timingInfo = `Completed in ${minutes} min ${seconds} sec from ${task.time} min`;
          } else if (task.aborted) {
            timingInfo = 'Aborted at ' + new Date(task.abortTime).toLocaleTimeString();
          }
          return `
          <div class="task-item ${task.completed ? 'completed' : 'aborted'}" data-id="${task.id}">
            <div>
              <div class="priority-tag ${task.priority}">${task.priority.toUpperCase()}</div>
              <span>${task.text}</span>
              <div class="extra-details">
                <div>Started: ${new Date(task.startTime).toLocaleString()}</div>
                <div>${timingInfo}</div>
              </div>
            </div>
            <div>
              <button class="delete-task" data-id="${task.id}">‚úï</button>
            </div>
          </div>
        `;
        }).join('');
      }
  
      renderNotes() {
        if (this.state.notes.length === 0) {
          this.noteHistory.innerHTML = `<p class="empty">No encrypted notes yet.</p>`;
          return;
        }
        this.noteHistory.innerHTML = this.state.notes.map(note => `
          <div class="note-item" data-id="${note.id}">
            <div>
              <div class="timestamp">${note.timestamp}</div>
              <div>${note.showDecrypted ? atob(note.text) : note.text}</div>
            </div>
            <button class="toggle-note" data-id="${note.id}">${note.showDecrypted ? 'Hide' : 'Show'}</button>
          </div>
        `).join('');
      }
  
      updateUI() {
        this.renderActiveTasks();
        this.renderTaskHistory();
        this.renderNotes();
      }
  
      toggleHistory() {
        if (this.taskHistoryWrapper.classList.contains('open')) {
          this.taskHistoryWrapper.classList.remove('open');
          this.toggleHistoryBtn.textContent = "Show Task History";
        } else {
          this.taskHistoryWrapper.classList.add('open');
          this.toggleHistoryBtn.textContent = "Hide Task History";
        }
      }
  
      toggleNotes() {
        const notesContainer = document.getElementById("notesContainer");
        if (notesContainer.style.display === "none") {
          notesContainer.style.display = "block";
          this.toggleNotesBtn.textContent = "Hide Notes";
        } else {
          notesContainer.style.display = "none";
          this.toggleNotesBtn.textContent = "Show Notes";
        }
      }
  
      toggleSettings() {
        if (this.settingsContainer.style.display === "none") {
          this.settingsContainer.style.display = "block";
        } else {
          this.settingsContainer.style.display = "none";
        }
      }
  
      clearHistory() {
        this.state.tasks = this.state.tasks.filter(task => !task.completed && !task.aborted);
        this.updateUI();
        this.saveState();
        this.showAchievement('Task history cleared!');
      }
  
      resetDailyPoints() {
        this.state.dailyPoints = 0;
        this.state.dailyGoalAchieved = false;
        this.updateRewardPointsDisplay();
        this.saveState();
        this.showAchievement('Daily points reset!');
      }
  
      editTask(id) {
        const taskTextElem = document.getElementById(`taskText-${id}`);
        const editInput = document.getElementById(`editInput-${id}`);
        const editBtn = document.querySelector(`.edit-task[data-id="${id}"]`);
        const saveBtn = document.querySelector(`.save-task[data-id="${id}"]`);
        if (taskTextElem && editInput && editBtn && saveBtn) {
          taskTextElem.style.display = "none";
          editInput.style.display = "inline-block";
          editBtn.style.display = "none";
          saveBtn.style.display = "inline-block";
        }
      }
  
      saveEditedTask(id) {
        const editInput = document.getElementById(`editInput-${id}`);
        const taskTextElem = document.getElementById(`taskText-${id}`);
        const editBtn = document.querySelector(`.edit-task[data-id="${id}"]`);
        const saveBtn = document.querySelector(`.save-task[data-id="${id}"]`);
        if (editInput && taskTextElem && editBtn && saveBtn) {
          const newText = editInput.value.trim();
          if (newText) {
            const task = this.state.tasks.find(t => t.id === id);
            task.text = newText;
            this.saveState();
            this.updateUI();
          }
        }
      }
  
      // ‡§Ö‡§™‡§°‡•á‡§ü‡•á‡§° ‡§™‡•ç‡§∞‡§ó‡§§‡§ø ‡§Ö‡§™‡§°‡•á‡§ü ‡§≤‡•Ç‡§™: setInterval ‡§ï‡§æ ‡§â‡§™‡§Ø‡•ã‡§ó (500ms ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§¨‡§æ‡§∞)
      startProgressUpdateLoop() {
        setInterval(() => {
          const now = Date.now();
          this.state.tasks.forEach(task => {
            if (!task.completed && !task.aborted) {
              const totalTime = task.endTime - task.startTime;
              const elapsed = now - task.startTime;
              const progress = Math.min((elapsed / totalTime) * 100, 100);
              task.progress = progress;
              const progressElem = document.getElementById(`progress-${task.id}`);
              if (progressElem) {
                progressElem.style.width = `${progress}%`;
              }
              const deadlineElem = document.getElementById(`deadline-${task.id}`);
              if (deadlineElem) {
                deadlineElem.textContent = progress < 100 ? this.getRemainingTimeText(task) : 'Completed';
              }
              if (this.config.voiceEnabled) {
                if (!task.beep50 && progress >= 50) {
                  task.beep50 = true;
                  console.log(`50% reached for task ${task.id}.`);
                  this.playSound('fifty');
                }
                if (!task.beep70 && progress >= 70) {
                  task.beep70 = true;
                  console.log(`70% reached for task ${task.id}.`);
                  this.playSound('seventy');
                }
                if (!task.beep90 && progress >= 90) {
                  task.beep90 = true;
                  console.log(`90% reached for task ${task.id}.`);
                  this.playSound('ninety');
                }
              }
              if (progress >= 100 && !task.completed && !task.prompted) {
                task.prompted = true;
                this.playSound('timer');
                if (Notification.permission === "granted") {
                  new Notification("Task Timer Finished", { 
                    body: `Task: ${task.text}\nDid you complete the task?`
                  });
                }
                const userConfirmed = confirm(`The timer for "${task.text}" is finished.\nDid you complete the task?`);
                if (userConfirmed) {
                  this.completeTask(task.id);
                } else {
                  this.state.rewardPoints -= 20;
                  this.state.dailyPoints -= 20;
                  task.aborted = true;
                  task.abortTime = Date.now();
                  this.updateUI();
                  this.updateRewardPointsDisplay();
                  this.saveState();
                }
              }
            }
          });
        }, 500); // 500ms ‡§Æ‡•á‡§Ç ‡§è‡§ï ‡§¨‡§æ‡§∞ ‡§Ö‡§™‡§°‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
      }
  
      // playSound ‡§Ö‡§¨ ‡§™‡•ç‡§∞‡•Ä-‡§≤‡•ã‡§°‡•á‡§° ‡§ë‡§°‡§ø‡§Ø‡•ã ‡§∏‡•á ‡§ï‡§æ‡§Æ ‡§ï‡§∞‡§§‡§æ ‡§π‡•à
      playSound(name) {
        if (this.sounds[name]) {
          // ‡§∏‡§æ‡§â‡§Ç‡§° ‡§ï‡•ã ‡§∂‡•Å‡§∞‡•Å‡§Ü‡§§ ‡§∏‡•á ‡§™‡•ç‡§≤‡•á ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è currentTime ‡§∏‡•á‡§ü ‡§ï‡§∞‡•á‡§Ç
          this.sounds[name].currentTime = 0;
          this.sounds[name].play().catch((error) => {
            console.error("Error playing sound:", error);
          });
        } else {
          console.warn("Sound not found:", name);
        }
      }
  
      showAchievement(message) {
        const achievement = document.createElement('div');
        achievement.textContent = message;
        achievement.style.position = 'fixed';
        achievement.style.top = '20px';
        achievement.style.right = '20px';
        achievement.style.background = 'var(--neon-pink)';
        achievement.style.padding = '10px 20px';
        achievement.style.borderRadius = '5px';
        achievement.style.boxShadow = 'var(--glow)';
        achievement.style.zIndex = 1000;
        document.body.appendChild(achievement);
        setTimeout(() => achievement.remove(), 3000);
      }
  
      showCelebration(message) {
        for (let i = 0; i < 3; i++) {
          setTimeout(() => {
            confetti({
              particleCount: 100,
              spread: 120,
              origin: { x: Math.random(), y: Math.random() }
            });
          }, i * 200);
        }
        const flash = document.createElement('div');
        flash.style.position = 'fixed';
        flash.style.top = '0';
        flash.style.left = '0';
        flash.style.width = '100%';
        flash.style.height = '100%';
        flash.style.background = 'rgba(255,255,255,0.3)';
        flash.style.zIndex = '999';
        flash.style.opacity = '1';
        flash.style.transition = 'opacity 1s ease-out';
        document.body.appendChild(flash);
        setTimeout(() => { flash.style.opacity = '0'; }, 100);
        setTimeout(() => { flash.remove(); }, 1100);
  
        const celebration = document.createElement('div');
        celebration.textContent = message;
        celebration.style.position = 'fixed';
        celebration.style.top = '50%';
        celebration.style.left = '50%';
        celebration.style.transform = 'translate(-50%, -50%) scale(0)';
        celebration.style.background = 'linear-gradient(45deg, #ff0080, #ff8c00)';
        celebration.style.padding = '40px 60px';
        celebration.style.borderRadius = '15px';
        celebration.style.boxShadow = '0 0 40px rgba(255,255,255,0.8)';
        celebration.style.zIndex = '1000';
        celebration.style.fontSize = '3rem';
        celebration.style.color = '#ffffff';
        celebration.style.transition = 'transform 0.5s ease-out, opacity 0.5s ease-out';
        celebration.style.opacity = '0';
        document.body.appendChild(celebration);
        setTimeout(() => {
          celebration.style.transform = 'translate(-50%, -50%) scale(1)';
          celebration.style.opacity = '1';
        }, 100);
        setTimeout(() => {
          celebration.style.transform = 'translate(-50%, -50%) scale(0.5)';
          celebration.style.opacity = '0';
        }, 2000);
        setTimeout(() => { celebration.remove(); }, 2500);
      }
  
      requestNotificationPermission() {
        if ("Notification" in window && Notification.permission !== "granted") {
          Notification.requestPermission();
        }
      }
  
      initBackgroundAudio() {
        if (window.AudioContext || window.webkitAudioContext) {
          try {
            const AudioContext = window.AudioContext || window.webkitAudioContext;
            const audioCtx = new AudioContext();
            if (audioCtx.state === 'suspended') {
              audioCtx.resume();
            }
          } catch (e) {
            console.error("AudioContext initialization failed:", e);
          }
        }
      }
  
      setupVisibilityChange() {
        document.addEventListener('visibilitychange', () => {
          if (document.visibilityState === 'hidden') {
            if (Notification.permission === "granted") {
              new Notification("You're off-task", {
                body: "Come back and complete your missions!"
              });
            }
          }
          if (document.visibilityState === 'visible') {
            if (window.AudioContext || window.webkitAudioContext) {
              const AudioContext = window.AudioContext || window.webkitAudioContext;
              const audioCtx = new AudioContext();
              if (audioCtx.state === 'suspended') {
                audioCtx.resume();
              }
            }
          }
        });
      }
  
      startBeepReminder() {
        if (this.beepTimeout) {
          clearTimeout(this.beepTimeout);
        }
      
        const beepFunction = () => {
          const activeTasks = this.state.tasks.filter(task => !task.completed && !task.aborted);
          if (activeTasks.length > 0) {
            console.log("Beep! üîä");
            this.playSound('beep');
          }
          this.beepTimeout = setTimeout(beepFunction, 7 * 60 * 1000); // 7 ‡§Æ‡§ø‡§®‡§ü ‡§¨‡§æ‡§¶ ‡§Ö‡§ó‡§≤‡§æ beep
        };
        beepFunction();
      }
  
      componentWillUnmount() {
        if (this.beepTimeout) {
          clearTimeout(this.beepTimeout);
        }
      }
    }
  
    document.addEventListener('DOMContentLoaded', () => {
      const app = new DarkProductivityApp();
  
      if (typeof particlesJS !== "undefined") {
        particlesJS('particles-js', {
          particles: {
            number: { value: 150 },
            color: { value: '#8a2be2' },
            shape: { type: 'circle' },
            opacity: { value: 0.5 },
            size: { value: 2 },
            move: {
              enable: true,
              speed: 1.5,
              direction: 'none',
              random: true,
              straight: false,
              out_mode: 'bounce',
              bounce: true
            }
          },
          interactivity: {
            detect_on: 'canvas',
            events: {
              onhover: { enable: true, mode: 'grab' },
              onclick: { enable: true, mode: 'push' },
              resize: true
            }
          }
        });
      } else {
        console.error("particlesJS is not loaded!");
      }
    });
    
    document.addEventListener("visibilitychange", () => {
      if (document.hidden) {
          console.log("Page is in background");
      } else {
          console.log("Page is active");
      }
    });
    
    document.addEventListener("click", () => {
      Notification.requestPermission().then(permission => {
          if (permission === "granted") {
              new Notification("Website will run in the background!");
          }
      });
    });
  </script>
  
  
  
</body>
</html>
